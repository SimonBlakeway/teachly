<style>
#login {
/* fallback for old browsers */
  background: rgb(85, 138, 230);
  /* Chrome 10-25, Safari 5.1-6 */
  background: -webkit-linear-gradient(to bottom right, rgba(3, 71, 117), rgba(85, 138, 230));
  /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
  background: linear-gradient(to bottom right, rgb(3, 71, 117), rgb(85, 138, 230));
  height: 80%;
  width: 100%;
  font-size: 18px;
}
.login-form-color {
  background: rgb(210, 233, 231);
}
.profile-input {
  font-size: 222px;
  font-family: calibri;
  width: 100%;
  padding: 0px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-width: 1px;
  border-style: solid;
  border-color: #0baecf;
  text-align: center;
  background-color: rgb(210, 233, 231);
  cursor: pointer;  
}
#profile-image {
  font-size: 15px;
  font-family: calibri;
  width: 100%;
  height: 46px;
  padding: 4px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-width: 1px;
  border-style: solid;
  border-color: #0baecf;
  text-align: center;
  background-color: rgb(210, 233, 231);
  cursor: pointer;
}
.popup {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    margin: auto;
    width: 40%;
    height: 40%; 
    padding: 20px;
    background: cyan;
    border-radius: 20px;
    display: none;
    justify-content: center;
    align-items: center;
}
#email-input-form {
  text-align: center;
}
#email-input {
  width: 100px;
  height: 10px;
  margin: auto;
  margin-top: 20px;
  margin-bottom: 15px;

}
#email-popup-submit {
  margin-bottom: 20px;
}
@media screen and (max-width: 500px) {
  .popup {
    width: 80%;
    height: 45%;
  }
  .email-input-form {
  padding: 10px;
  max-width: 600px;
  top: 10%;
  left: 10%;
  }
  .profile-input {
    width: 80%;
  }
}
@media screen and (max-width: 300px) {
  .popup {
    width: 80%;
    height: 50%;
    padding: 0px;
  }
  .email-input-form {
  padding: 5px;
  top: 10%;
  left: 10%;
  }
}
</style>
<section id="login">
  <section id="form-section">
    <div class="container py-5">
      <div class="row justify-content-center align-items-center h-100">
        <div class="col-12 col-lg-9 col-xl-7">
          <div class="login-form-color" style="border-radius: 15px; background-color: rgb(210, 233, 231);">
            <div class="p-4 p-md-5">
                <form onsubmit="return false" class="login-form-color">  
                  <div class="row">
                    <div class="col-md-6 mb-6">
                    <label class="form-label text" for="firstName">{{context.bodyContext.fullName}}</label>
                    <input required style="height: 20px; font-size: 18px; padding: -10px;" type="text" id="username" class="form-control form-control-sm border border-info rounded profile-input" />
                    </div>
                    <div class="col-md-6 mb-6">
                    <label class="form-label text" for="password">{{context.bodyContext.password}}</label>
                    <input required style="height: 20px; font-size: 18px; padding: -10px;" type="password" id="password" class="form-control form-control-sm border border-info rounded profile-input" />                 
                    </div>
                  </div>          
                  <div class="row">
                      <div class="col-md-12 mb-4">
                  <div class="form-check d-flex justify-content-center mb-5">
                    <label class="form-check-label">
                      {{context.bodyContext.IAgreeTo}} <a href="\termsofservice" class="text-body"><u>{{context.bodyContext.TOS}}</u></a>
                    </label>
                  </div> 
                  <div class="d-flex justify-content-center">
                    <button type='submit' onclick="sendloginReq()"class="btn btn-success btn-block btn-lg gradient-custom-4 text-body">
                      {{context.bodyContext.LOGIN}}</button>
                  </div>
                  <div>
                    <p class="text-center text-muted mt-5 mb-0 fw-bold text-body">
                      {{context.bodyContext.or}}
                    </p>        
                    <p>
                      <div id="sign-in-with-oauth" class="section" style="text-align: center;">
                        <a href="/auth/google" class="btn red darken-1" style="width: 250px;">
                          <i class="fab fa-google left"></i> Log In With Google
                        </a>
                        <a href="/auth/facebook" class="btn blue darken-2" style="width: 250px;">
                          <i class="fab fa-facebook left fa-small"></i> Log In With Facebook
                        </a>
                      </div>
                    </p>            
                  </div>
                    <p class="text-center text-muted mt-5 mb-0 fw-bold text-body">{{context.bodyContext.dontHaveAccount}} <a href="\login">
                      <u>{{context.bodyContext.createOne}}</u></a>
                    </p>
                      </div>      
                  </div> 
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

  <div id="err-popup" class="popup" style="height: 20%; width: 30%;">                 
        <div id="password-err">{{context.bodyContext.errPopup.passwordErr}}</div>
        <div id="name-err">{{context.bodyContext.errPopup.nameErr}}</div>
    </div>

    <script>
      sendloginReq = async function() {    
        try {
        formData = {
        'name': $("#username").val(),
        'password': $("#password").val(),     
        }
        res = await axios({
          method: 'post',
          url: '/auth/login',
          data: formData,
          headers: {
            'Content-Type': 'application/json',
            },
          }) 
        if (res.data.err) {
          $("#err-popup").attr("display", "grid");
          document.getElementById("err-popup").style.display = "grid";
          if (res.data.err == "invalid name") {
            $('#name-err').show();
            $('#password-err').hide(); 
            setTimeout(function() {      
              $('#err-popup').fadeOut('fast')
            }, 1000);
        }
          if (res.data.err == "invalid password") {
              $('#name-err').hide();
              $('#password-err').show(); 
            setTimeout(function() {
              $('#err-popup').fadeOut('fast')
            }, 1000);            
        }
        }
        else {
          window.location =  "/"
        }
        }   
        catch (err) {
          console.log(err)
        }     
      }
       
    
    </script>
</section>